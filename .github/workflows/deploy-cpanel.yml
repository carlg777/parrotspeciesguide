name: Deploy to cPanel

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Trigger cPanel Git Pull and Deploy via API
        run: |
          curl -k -X POST \
            -H "Authorization: cpanel ${{ secrets.CPANEL_USER }}:${{ secrets.CPANEL_API_TOKEN }}" \
            "https://${{ secrets.CPANEL_HOST }}:2083/execute/VersionControl/update" \
            -d "repository_root=/home/parrotguide/repositories/parrotspeciesguide"
