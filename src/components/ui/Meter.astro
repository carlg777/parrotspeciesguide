---
const { label, value, max = 10, color = "var(--pf-primary-500)", id } = Astro.props;

const percentage = Math.min(100, Math.max(0, (value / max) * 100));
---

<div class="meter-container">
  <div class="meter-header">
    <span class="meter-label">{label}</span>
    <span class="meter-value">{value}/{max}</span>
  </div>
  <div class="meter-track" role="progressbar" aria-valuenow={value} aria-valuemin="0" aria-valuemax={max} aria-labelledby={id}>
    <div class="meter-fill" style={`width: ${percentage}%; background-color: ${color};`}></div>
  </div>
</div>

<style>
  .meter-container {
    margin-bottom: 0.75rem;
  }
  
  .meter-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.25rem;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--pf-neutral-700);
  }

  .meter-track {
    width: 100%;
    height: 8px;
    background-color: var(--pf-neutral-200);
    border-radius: 9999px;
    overflow: hidden;
  }

  .meter-fill {
    height: 100%;
    border-radius: 9999px;
    transition: width 1s ease-out;
  }
</style>
